var QsRedirector=function(){'use strict';!function(){function e(e){this.value=e}function t(t){var r,n;function o(r,n){try{var a=t[r](n),u=a.value;u instanceof e?Promise.resolve(u.value).then(function(e){o("next",e)},function(e){o("throw",e)}):i(a.done?"return":"normal",a.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?o(r.key,r.arg):n=null}this._invoke=function(e,t){return new Promise(function(i,a){var u={key:e,arg:t,resolve:i,reject:a,next:null};n?n=n.next=u:(r=n=u,o(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},n=function(e){if(!e||'?'===e)return[];if(e.match(/^http/))throw new Error('"'+e+'" is invalid arg. give value of "window.location.search"');return e.replace(/^\?/,'').replace(/\?/g,'&').split("&").map(function(e){var t,r,n,o=e.split("=");return t={},r=''+o[0],n=''+o[1],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t})},o=function(){function o(t){var i=t.keyDest,a=void 0===i?'d':i,u=t.ignore,s=void 0===u?[]:u,c=t.query,l=void 0===c?window.location.search:c,h=t.protocol,f=void 0===h?window.location.protocol:h,v=t.host,y=void 0===v?window.location.host:v,d=t.dest,p=void 0===d?'':d,g=t.shouldSanitize,k=void 0===g||g;e(this,o),this.keyDest=a,this.ignore=[].concat(r(Array.isArray(s)?s:[s]),[a]),this.protocol=f,this.host=y,this.fixedDest=p,this.shouldSanitze=k,this.query=k?l.replace(/[<>()]|%3C|%3E|%28|%29/g,''):l,this.allQueryStringHash=n(this.query)}return t(o,[{key:'getParamHash',value:function(e){return this.allQueryStringHash.filter(function(t){return Object.keys(t)[0]===e})[0]}},{key:'getParamValue',value:function(e){try{return this.getParamHash(e)[e]}catch(t){return console.error('️️ℹ️ "'+e+'" does NOT exist in the query string. ignore...'),''}}},{key:'existsParam',value:function(e){return this.allQueryStringHash.some(function(t){return Object.keys(t)[0]===e})}},{key:'addParam',value:function(e){this.allQueryStringHash.push(e)}},{key:'changeParam',value:function(e){var t=Object.keys(e)[0],r=e[t];this.getParamHash(t)[t]=r}},{key:'setDest',value:function(e){e&&(this.fixedDest=e)}},{key:'setHost',value:function(e){e&&(this.host=e)}},{key:'setProtocol',value:function(e){e&&(this.protocol=e)}},{key:'getFilteredQueryStringHash',value:function(){var e=this;return this.allQueryStringHash.filter(function(t){var r=Object.keys(t)[0];return-1===e.ignore.indexOf(r)})}},{key:'getRedirectUri',value:function(){this.protocol=this.protocol.replace(/\//g,'');var e=new RegExp(/:$/).test(this.protocol)?this.protocol:this.protocol+':',t=''===this.fixedDest?this.getParamValue(this.keyDest):this.fixedDest,r=decodeURIComponent(t).replace(/\\/g,'').replace(/:\//g,'').replace(/\.\.+/g,'');return e+'//'+(this.host+'/'+r).replace(/\/+/g,'/')+'?'+this.getFilteredQueryStringHash().map(function(e){var t=Object.keys(e)[0];return t+'='+e[t]}).join('&')}},{key:'redirect',value:function(){var e=this.getRedirectUri();window.location.replace(e)}}]),o}();return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new o(e)}}();
