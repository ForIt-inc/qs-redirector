var QsRedirector=function(){'use strict';!function(){function c(e){this.value=e}function e(o){var i,a;function u(e,t){try{var r=o[e](t),n=r.value;n instanceof c?Promise.resolve(n.value).then(function(e){u("next",e)},function(e){u("throw",e)}):s(r.done?"return":"normal",r.value)}catch(e){s("throw",e)}}function s(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?u(i.key,i.arg):a=null}this._invoke=function(n,o){return new Promise(function(e,t){var r={key:n,arg:o,resolve:e,reject:t,next:null};a?a=a.next=r:(i=a=r,u(n,o))})},"function"!=typeof o.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)}}();var p=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),g=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},k=function(e){if(!e||'?'===e)return[];if(e.match(/^http/))throw new Error('"'+e+'" is invalid arg. give value of "window.location.search"');return e.replace(/^\?/,'').replace(/\?/g,'&').split("&").map(function(e){var t,r,n,o=e.split("=");return t={},r=''+o[0],n=''+o[1],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t})},w=function(e){return e.replace(/[<>()]|%3C|%3E|%28|%29/g,'')},t=function(){function d(e){var t=e.keyDest,r=void 0===t?'dest':t,n=e.ignore,o=void 0===n?[]:n,i=e.query,a=void 0===i?window.location.search:i,u=e.protocol,s=void 0===u?window.location.protocol:u,c=e.host,l=void 0===c?window.location.host:c,h=e.dest,f=void 0===h?'':h,v=e.shouldSanitize,y=void 0===v||v;p(this,d),this.keyDest=r,this.ignore=[].concat(g(Array.isArray(o)?o:[o]),[r]),this.protocol=s,this.host=l,this.fixedDest=f,this.shouldSanitize=y,this.query=y?w(a):a,this.allQueryStringHash=k(this.query)}return e(d,[{key:'getParamHash',value:function(t){return this.allQueryStringHash.filter(function(e){return Object.keys(e)[0]===t})[0]}},{key:'getParamValue',value:function(t){try{return this.getParamHash(t)[t]}catch(e){return console.error('️️ℹ️ "'+t+'" does NOT exist in the query string. ignore...'),''}}},{key:'existsParam',value:function(t){return this.allQueryStringHash.some(function(e){return Object.keys(e)[0]===t})}},{key:'addParam',value:function(e){this.allQueryStringHash.push(e)}},{key:'changeParam',value:function(e){var t=Object.keys(e)[0],r=e[t];this.getParamHash(t)[t]=r}},{key:'setDest',value:function(e){e&&(this.fixedDest=e)}},{key:'setHost',value:function(e){e&&(this.host=e)}},{key:'setProtocol',value:function(e){e&&(this.protocol=e)}},{key:'getFilteredQueryStringHash',value:function(){var r=this;return this.allQueryStringHash.filter(function(e){var t=Object.keys(e)[0];return-1===r.ignore.indexOf(t)})}},{key:'getRedirectUri',value:function(){this.protocol=this.protocol.replace(/\//g,'');var e=new RegExp(/:$/).test(this.protocol)?this.protocol:this.protocol+':',t=''===this.fixedDest?this.getParamValue(this.keyDest):this.fixedDest,r=decodeURIComponent(t).replace(/\\/g,'').replace(/:\//g,'').replace(/\.\.+/g,''),n=e+'//'+(this.host+'/'+r).replace(/\/+/g,'/')+'?'+this.getFilteredQueryStringHash().map(function(e){var t=Object.keys(e)[0];return t+'='+e[t]}).join('&');return this.shouldSanitize?n.replace(/"/g,'%22'):n}},{key:'redirect',value:function(){var e=this.getRedirectUri();window.location.replace(e)}}]),d}();return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new t(e)}}();
